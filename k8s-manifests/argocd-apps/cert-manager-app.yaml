apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: cert-manager
  namespace: argocd
spec:
  project: minemap-platform # –ò–ª–∏ –≤–∞—à–µ –∏–º—è –ø—Ä–æ–µ–∫—Ç–∞
  source:
    repoURL: https://charts.jetstack.io
    chart: cert-manager
    targetRevision: v1.14.4
    helm:
      values: |
        installCRDs: true 
        extraObjects:
          # ... –≤–∞—à ClusterIssuer ...
          
  destination:
    server: https://kubernetes.default.svc
    namespace: cert-manager
    
  # üö® –ö–õ–Æ–ß–ï–í–û–ô –ú–û–ú–ï–ù–¢: –î–æ–±–∞–≤–ª—è–µ–º –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
  ignoreDifferences:
  - group: rbac.authorization.k8s.io
    kind: Role
    name: cert-manager-startupapicheck:create-cert
    namespace: cert-manager
  - group: rbac.authorization.k8s.io
    kind: RoleBinding
    name: cert-manager-startupapicheck:create-cert
    namespace: cert-manager
    
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      # –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ, —É–±–∏—Ä–∞—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ Replace/Prune